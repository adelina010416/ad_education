# Проект "AdEducation"
## Платформа для учителей и их учеников

Данный проект представляет собой платформу для размещения обучающего материала, 
его изучения и прохождения тестов для закрепления пройденного. Также представлена
возможность коммуникации пользователей между собой в комментариях под темой, 
уроком или тестом, что позволит пользователям комфортно обсуждать пройденный материал,
задавать по нему вопросы или вносить предложения по поводу контента платформы.

## Эндпойнты
- `/users` - **работа с аккаунтом**
  - **Авторизация и регистрация** 
    - `/` - авторизация пользователей.
    - `/logout/` - выход из аккаунта.
    - `/register/` - регистрация. После регистрации на сайте, пользователя 
    просят подтвердить почту (`/confirm-mail/`), указанную в форме. Для этого 
    ему нужно будет перейти по ссылке (`/verifying/`), которая придёт ему в 
    письме на почту. Только после этого аккаунт пользователя будет активирован.
  - **Профиль** 
    - `/profile/` - страница профиля.
    - `/profile_edit/` - редактирование профиля. 
  - **Сброс пароля** 
    - `/recover-password/` - сброс пароля на случай, если пользователя забыл 
    пароль. Ссылка находится форме авторизации. Пользователю будет предложено 
    ввести почту, указанную в профиле. Если почта была указана верно, пользователь 
    будет перенаправлен на страницу `/reset_done/` с дальнейшими инструкциями, 
    а на почту придёт письмо с новым паролем.
    - `/wrong-mail/` - оповещение о неверно введённой почте: если пользователь 
    указывает почту, которой нет в базе данных сайта, платформа предложит ему 
    создать новый аккаунт или ввести другую почту.
    - `/reset_done/` - инструкции для дальнейших действий.
  - **Смена пароля** 
    - `/password/` - смена пароля (ссылка находится на странице 
    редактирования профиля). После пользователь будет перенаправлен на страницу 
    `/password_changed/`.
    - `/password_changed/` - сообщает об успешном изменении пароля.
- `/` - работа с сущностями предмета, темы, урока, теста, 
вопроса, ответа, результата (основные процессы).
  - **Работа с предметами**
    - `/subjects/` - список всех предметов. Для персонала также доступна 
    ссылка на создание предмета - `/subjects/create/`. 
    - `/subjects/< int:pk >` - страница, на которой представлены 
    название предмета, его описание (при наличии), а также все темы по 
    этому предмету (только опубликованные для обычного пользователя, 
    все - для персонала). Для персонала также доступны ссылки на редактирование 
    `/subjects/update/< int:pk>`, удаление `/subjects/delete/< int:pk>` 
    предмета и публикацию/снятие с публикации тем 
    `/themes/set-published/< int:pk>`.
    - `/subjects/create/` - создание предмета (только для персонала).
    - `/subjects/update/< int:pk>` - редактирование предмета
    (только для персонала).
    - `/subjects/delete/< int:pk>` - удаление предмета (только для 
    персонала). 
  - **Работа с темами**
    - `/themes/set-published/< int:pk>` - публикация/снятие с публикации
    темы (только для персонала).
    - `/my-themes/` - список всех тем, созданных пользователем.
    - `/themes/create/` - создание новой темы.
    - `/themes/< int:pk>` - страница с темой, её описанием и списком 
    всех уроков по этой теме (только опубликованных для обычного пользователя, 
    всех - для персонала).
    - `/themes/update/< int:pk>` - редактирование темы (доступно
    только владельцу темы).
    - `/themes/delete/< int:pk>` - удаление темы (доступно
    только владельцу темы).
  - **Работа с уроками**
    - `/lessons/< int:pk>` - материал урока. На странице представлены 
    Название урока, описание, материал, ссылка на видео (при наличии),
    комментарии по уроку, форма для нового комментария.
    - `lessons/set-published/< int:pk>` - публикация/снятие с публикации
    урока (только для персонала).
    - `lessons/create/` - создание нового урока.
    - `my-lessons/` - список всех уроков, созданных пользователем.
    - `lessons/update/< int:pk>` - редактирование урока (доступно
    только владельцу урока).
    - `lessons/delete/< int:pk>` - удаление урока (доступно
    только владельцу урока).
  - **Работа с тестами и связанными с ними сущностями** 
    - `test/create/` - создание нового теста. Представляет собой форму 
    с полями для названия и описания теста. После заполнения формы, 
    пользователь будет перенаправлен на страницу для создания вопросов для 
    теста - `questions/create/< int:pk>` (в адресе передаётся id теста, 
    для которого будут создаваться вопросы).
    - `my-tests/` - список всех уроков, созданных пользователем.
    - `test/list/< int:pk>` - список всех тестов (только опубликованных для 
    обычного пользователя, всех - для персонала), относящихся к одной теме, id 
    которой передаётся в адресной строке.
    - `test/< int:pk>` - просмотр вопросов и вариантов ответов теста (только для 
    опубликованных тестов или владельца теста).
    - `test/update/< int:pk>` - редактирование названия и описания 
    теста (доступно только владельцу теста).
    - `test/delete/< int:pk>` - удаление теста (доступно
    только владельцу теста).
    - `test/set-published/< int:pk>` - публикация/снятие с публикации
    урока (только для персонала).
    - `test/pass/< int:pk>` - страница прохождения теста. После 
    прохождения теста пользователь перенаправляется на `/result/< int:pk>`.
    - `result/< int:pk>` - страница с результатами пройденного теста.
    Если пользователь выбрал верный ответ, он подсвечивается зелёным цветом,
    если неверный - красным. В конце странице отображается результат в процентах,
    который рассчитывается по формуле "кол-во верных ответов пользователя х 100 / 
    общее кол-во верных ответов в тесте".
    - `questions/create/< int:pk>` - страница создания вопроса (в адресе 
    передаётся id теста, для которого будут создаваться вопросы). На странице 
    представлено 5 форм: одна для самого вопроса и четыре для вариантов ответа на 
    него. После заполнения форм пользователь имеет возможность закончить формирование 
    теста, нажав кнопку "готово" или добавить ещё вопросов, нажав кнопку "сохранить". 
    - `questions/update/< int:pk>` - редактирование вопроса и вариантов ответов 
    на него (доступно только владельцу теста, к которому относится вопрос).
    - `questions/delete/< int:pk>` - удаление вопроса (доступно 
    только владельцу теста, к которому относится вопрос).
    - `result/` - все результаты по пройденным пользователем тестам.
    - `result/delete/< int:pk>` - удаление записи о результате (доступно только 
    владельцу результата).
- `/comments` - **работа с комментариями**
    - `/< int:pk>'` - комментарии к теме.
    - `/test/< int:pk>` - комментарии к тесту.
    - `/my-comments/` - все комментарии пользователя с возможностью поиска по 
    тексту комментария, по названию темы, урока, теста.
    - `/update/< int:pk>` - редактирование комментария (доступно только 
    владельцу комментария).
    - `/delete/< int:pk>` - удаление комментария (доступно только владельцу 
    комментария).

## Запуск проекта

1. Клонируйте репозиторий
2. Создайте виртуальное окружение через меню среды разработки или 
с помощью команды:
   - `python -m venv myenv`
3. Установите зависимости:
   - `pip install -r requirements.txt`
4. Создайте файл `.env` в корневой директории и заполните необходимые 
переменные окружения, которые можете найти в файле `.enx.sample`.
5. Создайте базу данных командами:
   - `psql -U <имя_пользователя_бд>`
   - `create database <имя_бд>`
6. Примените миграции:
   - python manage.py migrate
7. Запустите сервер командой:
   - `python manage.py runserver`

## Фикстуры

Для комфортного тестирования и проверки работоспособности 
платформы в проекте присутствуют фикстуры для заполнения БД.
Они находятся в корневом каталоге в папке `fixtures`. Для 
заполнения БД фикстурами используйте команды:
- `python manage.py loaddata comments_data.json`
- `python manage.py loaddata materials_data.json`
- `python manage.py loaddata users_data.json`

Данные для входа тестовых пользователей:
- **Суперюзер**
  - почта: super_user@mail.ru
  - пароль: 1310
- **Модератор**
  - почта: moderator@mail.ru
  - пароль: testtest123455
- **Обычные пользователи**
  - почта: just_user99@gmail.com
  - пароль: testtest123455
